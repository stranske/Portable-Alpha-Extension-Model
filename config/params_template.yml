# Example YAML configuration for ModelConfig
# Values shown are illustrative defaults. Adjust as needed.

N_SIMULATIONS: 1000 # number of Monte Carlo trials
N_MONTHS: 12 # months in each simulation run

analysis_mode: returns # capital|returns|alpha_shares|vol_mult
external_pa_capital: 100.0 # external portable alpha capital ($mm)
active_ext_capital: 50.0 # active extension capital ($mm)
internal_pa_capital: 150.0 # internal portable alpha capital ($mm)
total_fund_capital: 300.0 # total fund capital ($mm)

w_beta_H: 0.5 # internal sleeve beta weight
w_alpha_H: 0.5 # internal sleeve alpha weight
theta_extpa: 0.5 # external PA alpha fraction
active_share: 0.5 # active-extension active share fraction

# Return units are annual by default and converted to monthly at config load.
# Set return_unit: monthly if you provide monthly inputs directly.
return_unit: annual # annual|monthly

# Agent configuration (optional)
# Use the convenience fields above or define a generic list below.
# Mixed mode: keep convenience fields and append extra agents here.
# agents:
#   - name: Base
#     capital: 300.0
#     beta_share: 0.5
#     alpha_share: 0.5
#     extra: {}
#   - name: CustomSleeve
#     capital: 25.0
#     beta_share: 0.08
#     alpha_share: 0.02
#     extra:
#       active_return_volatility_target: 0.03

mu_H_annual: 0.04 # annual mean return of in-house alpha
sigma_H_annual: 0.01 # annual volatility of in-house alpha
mu_E_annual: 0.05 # annual mean return of extension alpha
sigma_E_annual: 0.02 # annual volatility of extension alpha
mu_M_annual: 0.03 # annual mean return of external PA alpha
sigma_M_annual: 0.02 # annual volatility of external PA alpha

rho_idx_H: 0.05 # correlation index vs in-house
rho_idx_E: 0.00 # correlation index vs extension
rho_idx_M: 0.00 # correlation index vs external PA
rho_H_E: 0.10 # correlation in-house vs extension
rho_H_M: 0.10 # correlation in-house vs external PA
rho_E_M: 0.00 # correlation extension vs external PA

covariance_shrinkage: none # none|ledoit_wolf
vol_regime: single # single|two_state
vol_regime_window: 12 # recent window length (months) for two_state

# Optional regime-switching configuration
# regimes:
#   - name: calm
#     idx_sigma_multiplier: 1.0
#     sigma_H: 0.01
#     sigma_E: 0.02
#     sigma_M: 0.02
#     rho_idx_H: 0.05
#     rho_idx_E: 0.0
#     rho_idx_M: 0.0
#     rho_H_E: 0.1
#     rho_H_M: 0.1
#     rho_E_M: 0.0
#   - name: stress
#     idx_sigma_multiplier: 2.0
#     sigma_H: 0.05
#     sigma_E: 0.05
#     sigma_M: 0.05
#     rho_idx_H: 0.8
#     rho_idx_E: 0.8
#     rho_idx_M: 0.8
#     rho_H_E: 0.85
#     rho_H_M: 0.85
#     rho_E_M: 0.85
# regime_transition:
#   - [0.9, 0.1]
#   - [0.2, 0.8]
# regime_start: calm

return_distribution: normal # normal | student_t (student_t adds heavier tails and runtime)
return_t_df: 5.0 # degrees of freedom for Student-t (lower df => heavier tails)
return_copula: gaussian # gaussian | t (t-copula adds tail dependence and runtime)
# Optional per-series overrides (fallback to return_distribution when omitted)
# return_distribution_idx: normal
# return_distribution_H: normal
# return_distribution_E: normal
# return_distribution_M: normal

internal_financing_mean_month: 0.0 # internal financing mean per month
internal_financing_sigma_month: 0.0 # internal financing volatility per month
internal_spike_prob: 0.0 # internal financing spike probability
internal_spike_factor: 0.0 # internal financing spike size multiplier

ext_pa_financing_mean_month: 0.0 # external PA financing mean per month
ext_pa_financing_sigma_month: 0.0 # external PA financing volatility per month
ext_pa_spike_prob: 0.0 # external PA financing spike probability
ext_pa_spike_factor: 0.0 # external PA financing spike size multiplier

act_ext_financing_mean_month: 0.0 # active extension financing mean per month
act_ext_financing_sigma_month: 0.0 # active extension financing volatility per month
act_ext_spike_prob: 0.0 # active extension financing spike probability
act_ext_spike_factor: 0.0 # active extension financing spike size multiplier
financing_mode: broadcast # broadcast|per_path (broadcast shares one path across sims)

risk_metrics:
  - Return
  - Risk
  - terminal_ShortfallProb

# Sleeve constraint defaults (used by sleeve suggestor; optional validation on run)
sleeve_max_te: null # max monthly tracking error
sleeve_max_breach: null # max monthly breach probability
sleeve_max_cvar: null # max monthly CVaR
sleeve_max_shortfall: null # max terminal shortfall probability
sleeve_constraint_scope: total # total|per_sleeve
sleeve_validate_on_run: false # set true to raise on violations in run_single
# Financing model configuration
# simple_proxy: uses reference_sigma × volatility_multiple × total_fund_capital
# schedule: interpolates from a broker margin schedule CSV (term,multiplier)
# Uncomment to enable schedule-based margin
# financing_model: schedule  # default is simple_proxy
# financing_schedule_path: config/margin_schedule_template.csv
# financing_term_months: 1.0
# reference_sigma: 0.01       # used by both models
# volatility_multiple: 3.0    # used by simple_proxy only
